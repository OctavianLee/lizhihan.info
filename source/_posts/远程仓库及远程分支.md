title: Git中的远程仓库和远程分支
date: 2015-07-26 00:49:41
tags: [Git]
categories: Git
---


本文对git中的远程仓库和远程分支进行介绍，说明一些常用的使用方式。


# 远程仓库

远程仓库指托管在网络上的项目仓库。

对远程仓库进行操作，需要查看开发者是否具备权限，有些私人项目会因为没有授权而不能做远程仓库的相关操作。

## 远程仓库常用操作

+ 查看当前远程仓库：

进入一个git项目，输入`git remote`命令可以查看当前项目所有的远程仓库，加上`-v`选项，可以显示对应的克隆地址，形式为：`(仓库名) (地址)`。

+ 添加远程仓库：

当需要添加远程仓库到本地项目中，可以通过命令`git remote add (远程名称) (url地址)`来添加。

+ 从远程仓库获取数据：

通过命令`git fetch (远程名称)`来获取远程仓库里的数据，如果本地有该仓库数据，则会获取没有的信息。

+ 推送数据到远程仓库：

通过命令`git push (远程名称) (分支名)`可以将本地分支新的更新提交推送到远程仓库里。

+ 查看远程仓库信息：

通过`git remote show (远程名称)`来查看某个仓库的详细信息。

+ 重命名和删除远程仓库：

通过`git remote rename (旧名称) (新名称)`来将一个远程仓库重新命名；

通过`git remote rm (远程名称)`来删除不需要的远程仓库。


# 远程分支

远程分支(remote branch)是对远程仓库状态的索引，用`(远程仓库名)/(分支名)`来表示远程分支。

## 远程分支工作方式

### 建立远程分支

假设有一个Git服务器，地址为`git.ourcompany.com`。

当使用`git clone`克隆项目时，Git会自动命名远程仓库为`origin`，并下载所有数据，建立一个`master`分支的指针，在本地命名为`origin/master`。

Git继续在本地建立一个`master`分支，与`orgin`上`master`处于相同位置。

如图：

![remote branch](http://7xjc5f.com1.z0.glb.clouddn.com/img/remote_branch-1.png)

### 获取分支同步


当进行开发时，本地的分支会向前移动，此时别人在服务器上进行推送时，服务器上的分支会向前移动，但是`origin/master`指针不会移动。

此时可以通过`git fetch origin`命令来同步服务器。该命令找到`origin`所在服务器，获取数据，并更新本地数据库，把`origin/master`指针移到最新的位置。

如图：

![remote branch同步](http://7xjc5f.com1.z0.glb.clouddn.com/img/remote_branch-2.png)

### 从其他服务器获取同步

如果所需要的更新数据在其他的一个服务器上，通过`git remote add`命令将其加入为另一个远程分支，假设名字为`teamone`。

现在可以通过`git fetch teamone`来获取其他服务器上的数据，此时`origin`并没有改变，创建了一个`teamone/master`来指向新服务器上的`master`上的分支。

如图：

![remote branch其他服务器](http://7xjc5f.com1.z0.glb.clouddn.com/img/remote_branch-3.png)

### 推送和同步分支

假设有一个`serverfix`的分支与人协作开发。

当本地提交需要推上服务器，通过命令`git push (远程仓库) (分支名)`来实现。

协作者通过`git fetch origin`来得到服务器上的新的分支。

此时获取的更新可以通过`git merge origin/serverfix`命令将分支内容合并到当前分支，或者通过`git checkout -b serverfix origin/serverfix`命令创建一个自己的`serverfix`的分支进行开发。

## 远程方式管理

### 追踪分支

从远程分支checkout出来的本地分支，称为追踪分支(tracking branch)，通过`git push`或者`git pull`可以自动根据分支指向的服务器来推送或者获取更新。

当有其他需要获取追逐的分支可以通过`git checkout -b (分支名) (远程仓库名)/(分支名)`或者`git checkout --track (远程仓库名)/(分支名)`来获取。

### 删除远程分支

当开发完成后删除了本地的分支后，如果还想把远程分支进行删除，通过`git push (远程仓库名) :(分支名)`来讲改分支删除。

以上便是本篇文章的主要内容。

***

版本修改记录：

+ 2015-07-26 完成本次文章全部内容。 By Octavian
